@model InventoryManagementCore.Models.Models.Bill

@{
    ViewData["Title"] = "Create";
}

@*<h1>Create Bill</h1>
    <hr style="border: 2px solid #28a745;" />*@

<link href="~/css/addBill.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="~/js/Bill/search.js"></script>
<script src="~/js/Bill/handleData.js"></script>
<script>

</script>
<div id="errors" style="display: none"></div>
<div class="product-quantity product-selling-price"></div>
<div class="col mb-4">
    <div class="row-4">
        <div class="row">
            <div class="col-6  add-bill-upper-section add-bill-border-container">
                <div class="add-bill-search-customer">
                    <input class="form-control search-customer me-2 add-bill-search" style="display: inline; width: 92%" type="search" placeholder="Search Customers here" aria-label="Search">
                    <a asp-action="Create" asp-controller="Customer">
                        <button class="btn btn-success btn-add-product" style="display: inline;" data-toggle="tooltip" data-placement="top" title="Add New Customer">+</button>
                    </a>
                </div>
                <div class="add-bill-customer-overflow mt-3">
                    <ul class="list-group search-customers-list">
                        @{
                            foreach (var cust in ViewBag.CustomerDetails)
                            {
                                <li class="list-group-item">
                                    <p style="display:inline">@cust.CustomerName</p>
                                    <span class="float-right">
                                        <button id="@cust.CustomerId" class="select-customer btn btn-sm btn-primary">Select</button>
                                    </span>
                                </li>

                            }
                        }
                    </ul>
                </div>
            </div>

            <div class="col-6 add-bill-upper-section add-bill-border-container">
                <div class="">
                    <input class="form-control search-products me-2 add-bill-search" type="search" placeholder="Search Products here" id="products-search" aria-label="Search">
                </div>
                <div class="">
                    <div class="add-bill-customer-overflow mt-3">
                        <ul class="list-group search-products-list">

                            @{
                                foreach (var product in ViewBag.ProductDetails)
                                {
                                    <li class="list-group-item">
                                        <p style="display:inline">@product.ProductName</p>
                                        <span class="float-right">
                                            <button id="@product.ProductId" class="select-product btn btn-sm btn-primary">Select</button>
                                        </span>
                                    </li>

                                }
                            }
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row ">
        <div class="col-12 add-bill-border-container">
            <div class="row">
                <div id="cust-id" style="display:none">-1</div>
                <div class="col-9">
                    <p class="mt-1">
                        Customer Name:
                        <span id="cust-name"></span>
                    </p>
                </div>
                <div class="col-3">
                    <p class="mt-1">
                        Phone No:
                        <span id="cust-phone-no"></span>
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-9">
                    <p class="mt-1">
                        Address:
                        <span id="cust-address"></span>
                    </p>
                </div>
                <div class="col-3">
                    <p class="mt-1">
                        Net Outstanding:
                        <span id="cust-phone-no"></span>
                    </p>
                </div>


            </div>

            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col" style="display: none">Sr. No</th>
                        <th scope="col">Product</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Selling Price</th>
                        <th scope="col">Total</th>
                        <th scope="col">Delete</th>
                    </tr>
                </thead>
                <tbody id="product-items">
                </tbody>
                <tfoot>
                    <tr>

                        <td>Total Quatity:</td>
                        <td id="finalQty">0</td>
                        <td>Total Price:</td>
                        <td id="finalTotal">0</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <div style="display: flex; justify-content: space-evenly">
                                <div class="input-group input-group-sm mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroup-sizing-sm" style="height: 101%;">Total Paid</span>
                                    </div>
                                    <input type="number" min="0" id="totalPaid" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" style="height: 132%;">
                                </div>
                            </div>
                        </td>
                        <td colspan="3">
                            <div style="display: flex; justify-content: space-evenly">
                                <button onclick="handleMakeBill()" class="btn btn-success" style="width: 40%; height: 132%;">Make Bill</button>
                            </div>
                        </td>

                    </tr>

                </tfoot>
            </table>
        </div>
    </div>
</div>


